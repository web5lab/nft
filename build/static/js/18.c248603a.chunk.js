(this.webpackJsonpgigaland=this.webpackJsonpgigaland||[]).push([[18],{1920:function(e,r,t){"use strict";t.d(r,"a",(function(){return y}));var n=t(41),a=t(3),i=t(4),s=t(13),c=t(9),o=t(10),u=t(26),p=t(24),f=t(27),h=t.n(f),d=t(1843),v=t(18),l=t(375),g=t(882),m=t.n(g);function b(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function w(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?b(Object(t),!0).forEach((function(r){h()(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var y=function(e){Object(c.a)(t,e);var r=Object(o.a)(t);function t(e){var i,c;Object(a.a)(this,t);var o=e.config,f=e.state;if(c=r.call(this,{config:o,state:f}),h()(Object(s.a)(c),"_providerEngineProxy",null),!o.chainConfig)throw v.j.invalidProviderConfigError("Please provide chainConfig");if(!o.chainConfig.chainId)throw v.j.invalidProviderConfigError("Please provide chainId inside chainConfig");if(!o.chainConfig.rpcTarget)throw v.j.invalidProviderConfigError("Please provide rpcTarget inside chainConfig");return c.defaultState={chainId:"loading"},c.defaultConfig={chainConfig:o.chainConfig,networks:Object(n.a)({},o.chainConfig.chainId,o.chainConfig)},Object(u.a)((i=Object(s.a)(c),Object(p.a)(t.prototype)),"initialize",i).call(i),c}return Object(i.a)(t,[{key:"provider",get:function(){return this._providerEngineProxy},set:function(e){throw new Error("Method not implemented.")}},{key:"addChain",value:function(e){if(!e.chainId)throw l.ethErrors.rpc.invalidParams("chainId is required");if(!e.rpcTarget)throw l.ethErrors.rpc.invalidParams("chainId is required");this.configure({networks:w(w({},this.config.networks),{},Object(n.a)({},e.chainId,e))})}},{key:"getChainConfig",value:function(e){var r,t=null===(r=this.config.networks)||void 0===r?void 0:r[e];if(!t)throw l.ethErrors.rpc.invalidRequest("Chain ".concat(e," is not supported, please add chainConfig for it"));return t}},{key:"getProviderEngineProxy",value:function(){return this._providerEngineProxy}},{key:"updateProviderEngineProxy",value:function(e){this._providerEngineProxy?this._providerEngineProxy.setTarget(e):this._providerEngineProxy=Object(d.f)(e)}}]),t}(d.a);m()()},2124:function(e,r,t){"use strict";t.r(r),function(e){t.d(r,"PhantomInjectedProvider",(function(){return z})),t.d(r,"PrivateKeyWallet",(function(){return j})),t.d(r,"SolanaPrivateKeyProvider",(function(){return G})),t.d(r,"SolanaWallet",(function(){return Q})),t.d(r,"TorusInjectedProvider",(function(){return W}));var n=t(19),a=t(9),i=t(10),s=t(11),c=t(3),o=t(4),u=t(2),p=t.n(u),f=t(27),h=t.n(f),d=t(1873),v=t(1878),l=t.n(v),g=t(1868),m=t.n(g),b=t(1843),w=t(127),y=t(18),O=t(1920),x=t(375),j=function(){function r(e){Object(c.a)(this,r),h()(this,"provider",void 0),this.provider=e}return Object(o.a)(r,[{key:"requestAccounts",value:function(){var e=Object(s.a)(p.a.mark((function e(){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.provider.request({method:"requestAccounts",params:{}});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"signAndSendTransaction",value:function(){var e=Object(s.a)(p.a.mark((function e(r){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.signTransaction(r);case 2:return t=e.sent,e.next=5,this.provider.request({method:"sendTransaction",params:[m.a.encode(t.serialize())]});case 5:return n=e.sent,e.abrupt("return",{signature:n});case 7:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"sendTransaction",value:function(){var e=Object(s.a)(p.a.mark((function e(r){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.signTransaction(r);case 2:return t=e.sent,e.next=5,this.provider.request({method:"sendTransaction",params:[m.a.encode(t.serialize())]});case 5:return n=e.sent,e.abrupt("return",{signature:n});case 7:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"signTransaction",value:function(){var r=Object(s.a)(p.a.mark((function r(t){var n,a;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.provider.request({method:"solanaPrivateKey"});case 2:return n=r.sent,a=d.a.fromSecretKey(e.from(n,"hex")),t.partialSign(a),r.abrupt("return",t);case 6:case"end":return r.stop()}}),r,this)})));return function(e){return r.apply(this,arguments)}}()},{key:"signAllTransactions",value:function(){var r=Object(s.a)(p.a.mark((function r(t){var n,a;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.provider.request({method:"solanaPrivateKey"});case 2:return n=r.sent,a=d.a.fromSecretKey(e.from(n,"hex")),r.abrupt("return",t.map((function(e){return e.partialSign(a),e})));case 5:case"end":return r.stop()}}),r,this)})));return function(e){return r.apply(this,arguments)}}()},{key:"signMessage",value:function(){var r=Object(s.a)(p.a.mark((function r(t){var n,a,i;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.provider.request({method:"solanaPrivateKey"});case 2:return n=r.sent,a=d.a.fromSecretKey(e.from(n,"hex")),i=l.a.sign.detached(t,a.secretKey),r.abrupt("return",i);case 6:case"end":return r.stop()}}),r,this)})));return function(e){return r.apply(this,arguments)}}()},{key:"request",value:function(){var e=Object(s.a)(p.a.mark((function e(r){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.provider.request(r);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()}]),r}();function k(e){return function(r,t,n,a){return"solana_chainId"===r.method?(t.result=e,a()):n()}}function P(e){return function(r,t,n,a){return"solana_provider_config"===r.method?(t.result=e,a()):n()}}function E(e){var r=e.chainId;return Object(w.k)([k(r),P(e)])}function C(e){var r=e.rpcTarget,t=Object(b.g)({rpcTarget:r});return{networkMiddleware:Object(w.k)([E(e),t]),fetchMiddleware:t}}function A(e){var r=e.getAccounts;return Object(w.f)(function(){var e=Object(s.a)(p.a.mark((function e(t,n,a){var i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("getAccounts"===t.method){e.next=3;break}return e.abrupt("return",a());case 3:if(r){e.next=5;break}throw new Error("WalletMiddleware - opts.getAccounts not provided");case 5:return e.next=7,r(t);case 7:return i=e.sent,n.result=i,e.abrupt("return",void 0);case 10:case"end":return e.stop()}}),e)})));return function(r,t,n){return e.apply(this,arguments)}}())}function q(e){var r=e.requestAccounts;return Object(w.f)(function(){var e=Object(s.a)(p.a.mark((function e(t,n,a){var i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("requestAccounts"===t.method){e.next=3;break}return e.abrupt("return",a());case 3:if(r){e.next=5;break}throw new Error("WalletMiddleware - opts.requestAccounts not provided");case 5:return e.next=7,r(t);case 7:return i=e.sent,n.result=i,e.abrupt("return",void 0);case 10:case"end":return e.stop()}}),e)})));return function(r,t,n){return e.apply(this,arguments)}}())}function S(e,r){return Object(w.f)(function(){var t=Object(s.a)(p.a.mark((function t(n,a,i){var s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.method===e){t.next=3;break}return t.abrupt("return",i());case 3:if(r){t.next=5;break}throw new Error("WalletMiddleware - ".concat(e," not provided"));case 5:return t.next=7,r(n);case 7:return s=t.sent,a.result=s,t.abrupt("return",void 0);case 10:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}())}function I(e){var r=e.getAccounts,t=e.requestAccounts,n=e.signTransaction,a=e.signAndSendTransaction,i=e.signAllTransactions,s=e.signMessage,c=e.getPrivateKey;return Object(w.k)([q({requestAccounts:t}),A({getAccounts:r}),S("signTransaction",n),S("signAndSendTransaction",a),S("signAllTransactions",i),S("signMessage",s),S("solanaPrivateKey",c)])}function T(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function K(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?T(Object(t),!0).forEach((function(r){h()(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):T(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function M(e){return Object(w.f)(function(){var r=Object(s.a)(p.a.mark((function r(t,n,a){var i;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.request(K({},t));case 2:i=r.sent,n.result=i;case 4:case"end":return r.stop()}}),r)})));return function(e,t,n){return r.apply(this,arguments)}}())}var _=function(e){var r={requestAccounts:function(){var r=Object(s.a)(p.a.mark((function r(){return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",e.publicKey?[m.a.encode(e.publicKey.toBytes())]:[]);case 1:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),getAccounts:function(){var r=Object(s.a)(p.a.mark((function r(){return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",e.publicKey?[m.a.encode(e.publicKey.toBytes())]:[]);case 1:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),getPrivateKey:function(){var e=Object(s.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw x.ethErrors.rpc.methodNotSupported();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),signTransaction:function(){var r=Object(s.a)(p.a.mark((function r(t){var n,a,i;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=m.a.decode(t.params.message),a=d.c.from(n),r.next=4,e.signTransaction(a);case 4:return i=r.sent,r.abrupt("return",i);case 6:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),signMessage:function(){var r=Object(s.a)(p.a.mark((function r(t){var n,a;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.request({method:"signMessage",params:{message:null===(n=t.params)||void 0===n?void 0:n.message}});case 2:return a=r.sent,r.abrupt("return",a);case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),signAndSendTransaction:function(){var r=Object(s.a)(p.a.mark((function r(t){var n,a,i;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=m.a.decode(t.params.message),a=d.c.from(n),r.next=4,e.signAndSendTransaction(a);case 4:return i=r.sent,r.abrupt("return",{signature:i.signature});case 6:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),signAllTransactions:function(){var r=Object(s.a)(p.a.mark((function r(t){var n,a,i,s;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null!==(n=t.params)&&void 0!==n&&n.message&&null!==(a=t.params)&&void 0!==a&&a.message.length){r.next=2;break}throw x.ethErrors.rpc.invalidParams("message");case 2:return i=t.params.message.map((function(e){var r=m.a.decode(e);return d.c.from(r)})),r.next=5,e.signAllTransactions(i);case 5:return s=r.sent,r.abrupt("return",s);case 7:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()};return r};function N(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function D(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?N(Object(t),!0).forEach((function(r){h()(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):N(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var z=function(e){Object(a.a)(t,e);var r=Object(i.a)(t);function t(e){Object(c.a)(this,t);var n=e.config,a=e.state;return r.call(this,{config:{chainConfig:D(D({},n.chainConfig),{},{chainNamespace:y.f.SOLANA})},state:a})}return Object(o.a)(t,[{key:"switchChain",value:function(){var e=Object(s.a)(p.a.mark((function e(r){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve());case 1:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()},{key:"setupProvider",value:function(){var e=Object(s.a)(p.a.mark((function e(r){var t,n,a,i,s,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=_(r),n=I(t),a=E(this.config.chainConfig),i=M(r),(s=new w.b).push(n),s.push(a),s.push(i),c=Object(b.i)(s),this.updateProviderEngineProxy(c),e.next=12,this.lookupNetwork(r);case 12:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"lookupNetwork",value:function(){var e=Object(s.a)(p.a.mark((function e(r){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.config.chainConfig,this.update({chainId:t.chainId}),e.abrupt("return",t.chainId||"");case 3:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()}]),t}(O.a),B=function(r){var t={requestAccounts:function(){var e=Object(s.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.request({method:"solana_requestAccounts",params:{}});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getAccounts:function(){var e=Object(s.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.request({method:"solana_accounts",params:{}});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getPrivateKey:function(){var e=Object(s.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw x.ethErrors.rpc.methodNotSupported();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),signMessage:function(){var e=Object(s.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.request({method:"sign_message",params:{data:null===(n=t.params)||void 0===n?void 0:n.message}});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),signTransaction:function(){var t=Object(s.a)(p.a.mark((function t(n){var a,i,s,c,o;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==(a=n.params)&&void 0!==a&&a.message){t.next=2;break}throw x.ethErrors.rpc.invalidParams("message");case 2:return i=m.a.decode(n.params.message).toString("hex"),t.next=5,r.request({method:"sign_transaction",params:{message:i}});case 5:return s=t.sent,c=e.from(s,"hex"),o=d.c.from(c),t.abrupt("return",o);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),signAndSendTransaction:function(){var e=Object(s.a)(p.a.mark((function e(t){var n,a,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(n=t.params)&&void 0!==n&&n.message){e.next=2;break}throw x.ethErrors.rpc.invalidParams("message");case 2:return a=m.a.decode(t.params.message).toString("hex"),e.next=5,r.request({method:"send_transaction",params:{message:a}});case 5:return i=e.sent,e.abrupt("return",{signature:i});case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),signAllTransactions:function(){var e=Object(s.a)(p.a.mark((function e(t){var a,i,s,c,o,u,f,h;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(a=t.params)&&void 0!==a&&a.message&&null!==(i=t.params)&&void 0!==i&&i.message.length){e.next=2;break}throw x.ethErrors.rpc.invalidParams("message");case 2:s=[],c=Object(n.a)(t.params.message);try{for(c.s();!(o=c.n()).done;)u=o.value,f=m.a.decode(u).toString("hex"),s.push(f)}catch(p){c.e(p)}finally{c.f()}return e.next=7,r.request({method:"sign_all_transactions",params:{message:s}});case 7:return h=e.sent,e.abrupt("return",h);case 9:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()};return t};function L(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function U(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?L(Object(t),!0).forEach((function(r){h()(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):L(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var W=function(e){Object(a.a)(t,e);var r=Object(i.a)(t);function t(e){Object(c.a)(this,t);var n=e.config,a=e.state;return r.call(this,{config:{chainConfig:U(U({},n.chainConfig),{},{chainNamespace:y.f.SOLANA})},state:a})}return Object(o.a)(t,[{key:"switchChain",value:function(){var e=Object(s.a)(p.a.mark((function e(r){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve());case 1:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()},{key:"setupProvider",value:function(){var e=Object(s.a)(p.a.mark((function e(r){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.handleInjectedProviderUpdate(r),e.next=3,this.setupEngine(r);case 3:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"lookupNetwork",value:function(){var e=Object(s.a)(p.a.mark((function e(){var r,t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.provider){e.next=2;break}throw x.ethErrors.provider.custom({message:"Torus solana provider is not initialized",code:4902});case 2:return r=this.config.chainConfig.chainId,e.next=5,this.provider.request({method:"solana_chainId"});case 5:if(t=e.sent,n=Object(y.n)(t.toString())?t:"0x".concat(parseInt(t,10).toString(16)),r===n){e.next=9;break}throw y.j.rpcConnectionError("Invalid network, net_version is: ".concat(n,", expected: ").concat(r));case 9:return this.update({chainId:n}),this.provider.emit("connect",{chainId:this.state.chainId}),this.provider.emit("chainChanged",this.state.chainId),e.abrupt("return",this.state.chainId);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setupEngine",value:function(){var e=Object(s.a)(p.a.mark((function e(r){var t,n,a,i,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=B(r),n=I(t),a=M(r),(i=new w.b).push(n),i.push(a),s=Object(b.i)(i),this.updateProviderEngineProxy(s),e.next=10,this.lookupNetwork();case 10:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"handleInjectedProviderUpdate",value:function(){var e=Object(s.a)(p.a.mark((function e(r){var t=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.on("accountsChanged",function(){var e=Object(s.a)(p.a.mark((function e(r){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.provider.emit("accountsChanged",r);case 1:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()),r.on("chainChanged",function(){var e=Object(s.a)(p.a.mark((function e(n){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(y.n)(n)?n:"0x".concat(parseInt(n,10).toString(16)),t.configure({chainConfig:U(U({},t.config.chainConfig),{},{chainId:a})}),e.next=4,t.setupProvider(r);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()}]),t}(O.a);function J(e){return F.apply(this,arguments)}function F(){return F=Object(s.a)(p.a.mark((function r(t){var a,i,c,o,u,f;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=t.privKey,i=t.getProviderEngineProxy,c=function(e){var r=m.a.decode(e);return d.c.from(r)},o=function(){return d.a.fromSecretKey(e.from(a,"hex"))},"string"===typeof a){r.next=5;break}throw y.j.invalidParams("privKey must be a string");case 5:return u=o(),f={requestAccounts:function(){var e=Object(s.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[u.publicKey.toBase58()]);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getAccounts:function(){var e=Object(s.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[u.publicKey.toBase58()]);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getPrivateKey:function(){var e=Object(s.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),signTransaction:function(){var e=Object(s.a)(p.a.mark((function e(r){var t,n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(t=r.params)&&void 0!==t&&t.message){e.next=2;break}throw x.ethErrors.rpc.invalidParams("message");case 2:return(a=c(null===(n=r.params)||void 0===n?void 0:n.message)).partialSign(u),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),signMessage:function(){var e=Object(s.a)(p.a.mark((function e(r){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(t=r.params)&&void 0!==t&&t.message){e.next=2;break}throw x.ethErrors.rpc.invalidParams("message");case 2:return n=l.a.sign.detached(r.params.message,u.secretKey),e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),signAndSendTransaction:function(){var e=Object(s.a)(p.a.mark((function e(r){var t,n,a,s,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(t=r.params)&&void 0!==t&&t.message){e.next=2;break}throw x.ethErrors.rpc.invalidParams("message");case 2:if(a=i()){e.next=5;break}throw x.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 5:return(s=c(null===(n=r.params)||void 0===n?void 0:n.message)).sign(u),e.next=9,a.request({method:"sendTransaction",params:[m.a.encode(s.serialize())]});case 9:return o=e.sent,e.abrupt("return",{signature:o});case 11:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),signAllTransactions:function(){var e=Object(s.a)(p.a.mark((function e(r){var t,a,i,s,o,f,h,d;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(t=r.params)&&void 0!==t&&t.message&&null!==(a=r.params)&&void 0!==a&&a.message.length){e.next=2;break}throw x.ethErrors.rpc.invalidParams("message");case 2:i=[],s=Object(n.a)((null===(h=r.params)||void 0===h?void 0:h.message)||[]);try{for(s.s();!(o=s.n()).done;)f=o.value,(d=c(f)).partialSign(u),i.push(d)}catch(p){s.e(p)}finally{s.f()}return e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()},r.abrupt("return",f);case 8:case"end":return r.stop()}}),r)}))),F.apply(this,arguments)}function H(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function R(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?H(Object(t),!0).forEach((function(r){h()(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):H(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var G=function(e){Object(a.a)(t,e);var r=Object(i.a)(t);function t(e){Object(c.a)(this,t);var n=e.config,a=e.state;return r.call(this,{config:{chainConfig:R(R({},n.chainConfig),{},{chainNamespace:y.f.SOLANA})},state:a})}return Object(o.a)(t,[{key:"enable",value:function(){var e=Object(s.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.privateKey){e.next=2;break}throw x.ethErrors.provider.custom({message:"Private key is not found in state, plz pass it in constructor state param",code:4902});case 2:return e.next=4,this.setupProvider(this.state.privateKey);case 4:return e.abrupt("return",this._providerEngineProxy.request({method:"eth_accounts"}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setupProvider",value:function(){var e=Object(s.a)(p.a.mark((function e(r){var t,n,a,i,s,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J({privKey:r,getProviderEngineProxy:this.getProviderEngineProxy.bind(this)});case 2:return t=e.sent,n=I(t),a=new w.b,i=C(this.config.chainConfig),s=i.networkMiddleware,a.push(this.getChainSwitchMiddleware()),a.push(this.getAccountMiddleware()),a.push(n),a.push(s),c=Object(b.i)(a),this.updateProviderEngineProxy(c),e.next=14,this.lookupNetwork();case 14:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"updateAccount",value:function(){var e=Object(s.a)(p.a.mark((function e(r){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._providerEngineProxy){e.next=2;break}throw x.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 2:return e.next=4,this._providerEngineProxy.request({method:"solanaPrivateKey"});case 4:if(e.sent===r.privateKey){e.next=14;break}return e.next=8,this.setupProvider(r.privateKey);case 8:return e.t0=this._providerEngineProxy,e.next=11,this._providerEngineProxy.request({method:"requestAccounts"});case 11:e.t1=e.sent,e.t2={accounts:e.t1},e.t0.emit.call(e.t0,"accountsChanged",e.t2);case 14:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"switchChain",value:function(){var e=Object(s.a)(p.a.mark((function e(r){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._providerEngineProxy){e.next=2;break}throw x.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 2:return t=this.getChainConfig(r.chainId),this.update({chainId:"loading"}),this.configure({chainConfig:t}),e.next=7,this._providerEngineProxy.request({method:"solanaPrivateKey"});case 7:return n=e.sent,e.next=10,this.setupProvider(n);case 10:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"lookupNetwork",value:function(){var e=Object(s.a)(p.a.mark((function e(){var r,t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._providerEngineProxy){e.next=2;break}throw x.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 2:return e.next=4,this._providerEngineProxy.request({method:"getHealth",params:[]});case 4:if(r=e.sent,t=this.config.chainConfig,"ok"===r){e.next=8;break}throw y.j.rpcConnectionError("Failed to lookup network for following rpc target: ".concat(t.rpcTarget));case 8:return this.update({chainId:t.chainId}),this.state.chainId!==t.chainId&&(this.provider.emit("chainChanged",this.state.chainId),this.provider.emit("connect",{chainId:this.state.chainId})),e.abrupt("return",this.state.chainId);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getChainSwitchMiddleware",value:function(){var e=this,r={addNewChainConfig:function(){var r=Object(s.a)(p.a.mark((function r(t){var n,a,i,s,c,o;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.params){r.next=2;break}throw x.ethErrors.rpc.invalidParams("Missing request params");case 2:if(n=t.params,a=n.chainId,i=n.chainName,s=n.rpcUrls,c=n.blockExplorerUrls,o=n.nativeCurrency,a){r.next=5;break}throw x.ethErrors.rpc.invalidParams("Missing chainId in chainParams");case 5:if(s&&0!==s.length){r.next=7;break}throw x.ethErrors.rpc.invalidParams("Missing rpcUrls in chainParams");case 7:if(o){r.next=9;break}throw x.ethErrors.rpc.invalidParams("Missing nativeCurrency in chainParams");case 9:e.addChain({chainNamespace:y.f.SOLANA,chainId:a,ticker:(null===o||void 0===o?void 0:o.symbol)||"SOL",tickerName:(null===o||void 0===o?void 0:o.name)||"Solana",displayName:i,rpcTarget:s[0],blockExplorer:(null===c||void 0===c?void 0:c[0])||""});case 10:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),switchSolanaChain:function(){var r=Object(s.a)(p.a.mark((function r(t){return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.params){r.next=2;break}throw x.ethErrors.rpc.invalidParams("Missing request params");case 2:if(t.params.chainId){r.next=4;break}throw x.ethErrors.rpc.invalidParams("Missing chainId");case 4:return r.next=6,e.switchChain(t.params);case 6:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()};return function(e){var r=e.addNewChainConfig,t=e.switchSolanaChain;return Object(w.k)([S("addSolanaChain",r),S("switchSolanaChain",t)])}(r)}},{key:"getAccountMiddleware",value:function(){var e=this,r={updatePrivatekey:function(){var r=Object(s.a)(p.a.mark((function r(t){var n;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.params){r.next=2;break}throw x.ethErrors.rpc.invalidParams("Missing request params");case 2:if(t.params.privateKey){r.next=4;break}throw x.ethErrors.rpc.invalidParams("Missing privateKey");case 4:return n=t.params.privateKey,r.next=7,e.updateAccount({privateKey:n});case 7:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()};return function(e){var r=e.updatePrivatekey;return Object(w.k)([S("updateAccount",r)])}(r)}}]),t}(O.a);h()(G,"getProviderInstance",function(){var e=Object(s.a)(p.a.mark((function e(r){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new G({config:{chainConfig:r.chainConfig}}),e.next=3,t.setupProvider(r.privKey);case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}());var Q=function(){function e(r){Object(c.a)(this,e),h()(this,"provider",void 0),this.provider=r}return Object(o.a)(e,[{key:"requestAccounts",value:function(){var e=Object(s.a)(p.a.mark((function e(){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.provider.request({method:"requestAccounts",params:{}});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"signAndSendTransaction",value:function(){var e=Object(s.a)(p.a.mark((function e(r){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.provider.request({method:"signAndSendTransaction",params:{message:m.a.encode(r.serialize({requireAllSignatures:!1}))}});case 2:return t=e.sent,n=t.signature,e.abrupt("return",{signature:n});case 5:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"signTransaction",value:function(){var e=Object(s.a)(p.a.mark((function e(r){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.provider.request({method:"signTransaction",params:{message:m.a.encode(r.serialize({requireAllSignatures:!1}))}});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"signAllTransactions",value:function(){var e=Object(s.a)(p.a.mark((function e(r){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.map((function(e){return m.a.encode(e.serialize({requireAllSignatures:!1}))})),e.next=3,this.provider.request({method:"signAllTransactions",params:{message:t}});case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"signMessage",value:function(){var e=Object(s.a)(p.a.mark((function e(r){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.provider.request({method:"signMessage",params:{message:r}});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"request",value:function(){var e=Object(s.a)(p.a.mark((function e(r){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.provider.request(r);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()}]),e}()}.call(this,t(40).Buffer)}}]);
//# sourceMappingURL=18.c248603a.chunk.js.map